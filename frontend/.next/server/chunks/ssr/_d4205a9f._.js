module.exports=[62067,83456,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=(0,c.forwardRef)(({className:a,title:c,subtitle:e,action:f,children:g,...h},i)=>(0,b.jsxs)("div",{ref:i,className:(0,d.cn)("bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",a),...h,children:[(c||e||f)&&(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[c&&(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c}),e&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e})]}),f&&(0,b.jsx)("div",{children:f})]}),(0,b.jsx)("div",{className:"p-6",children:g})]}));e.displayName="Card",a.s(["Card",0,e],62067);var f=a.i(33915),g=a.i(19032),h=a.i(6704);let i=(0,f.create)((a,b)=>({sites:[],currentSite:null,isLoading:!1,fetchSites:async()=>{a({isLoading:!0});try{let b=await g.sitesAPI.getAll();a({sites:b.data.data,isLoading:!1})}catch(b){a({isLoading:!1})}},fetchSite:async b=>{a({isLoading:!0});try{let c=await g.sitesAPI.getOne(b);a({currentSite:c.data.data,isLoading:!1})}catch(b){a({isLoading:!1})}},createSite:async b=>{a({isLoading:!0});try{let c=(await g.sitesAPI.create(b)).data.data;return a(a=>({sites:[...a.sites,c],isLoading:!1})),h.toast.success("সাইট তৈরি হয়েছে!"),c}catch(b){return a({isLoading:!1}),null}},updateSite:async(b,c)=>{try{let d=(await g.sitesAPI.update(b,c)).data.data;return a(a=>({sites:a.sites.map(a=>a._id===b?d:a),currentSite:a.currentSite?._id===b?d:a.currentSite})),h.toast.success("সাইট আপডেট হয়েছে!"),!0}catch(a){return!1}},deleteSite:async b=>{try{return await g.sitesAPI.delete(b),a(a=>({sites:a.sites.filter(a=>a._id!==b)})),h.toast.success("সাইট ডিলিট হয়েছে!"),!0}catch(a){return!1}},setCurrentSite:b=>{a({currentSite:b})}}));a.s(["useSites",0,i],83456)},622,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=(0,c.forwardRef)(({className:a,label:c,error:e,options:f,...g},h)=>(0,b.jsxs)("div",{className:"w-full",children:[c&&(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c}),(0,b.jsx)("select",{ref:h,className:(0,d.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",e&&"border-red-500 focus:ring-red-500",a),...g,children:f.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))}),e&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:e})]}));e.displayName="Select",a.s(["Select",0,e])},77156,a=>{"use strict";let b=(0,a.i(70106).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Eye",()=>b],77156)},96438,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=(0,c.forwardRef)(({className:a,variant:c="primary",size:e="md",isLoading:f,children:g,disabled:h,...i},j)=>(0,b.jsxs)("button",{ref:j,className:(0,d.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[c],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[e],(h||f)&&"opacity-50 cursor-not-allowed",a),disabled:h||f,...i,children:[f&&(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),g]}));e.displayName="Button",a.s(["Button",0,e])},94988,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=(0,c.forwardRef)(({className:a,label:c,error:e,...f},g)=>(0,b.jsxs)("div",{className:"w-full",children:[c&&(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c}),(0,b.jsx)("input",{ref:g,className:(0,d.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",e&&"border-red-500 focus:ring-red-500",a),...f}),e&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:e})]}));e.displayName="Input",a.s(["Input",0,e])},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},15618,48313,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>c],15618);var d=a.i(87924),e=a.i(72131);let f=(0,b.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var g=a.i(68114);function h({isOpen:a,onClose:b,title:c,children:h,size:i="md"}){return((0,e.useEffect)(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]),a)?(0,d.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:b}),(0,d.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,d.jsxs)("div",{className:(0,g.cn)("relative w-full bg-white rounded-xl shadow-xl",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]),children:[c&&(0,d.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:c}),(0,d.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,d.jsx)(f,{className:"w-5 h-5"})})]}),(0,d.jsx)("div",{className:"px-6 py-4",children:h})]})})]}):null}a.s(["Modal",()=>h],48313)},40840,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15618),f=a.i(81560),g=a.i(70106);let h=(0,g.default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),i=(0,g.default)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var j=a.i(77156),k=a.i(62067),l=a.i(96438),m=a.i(48313),n=a.i(94988),o=a.i(622),p=a.i(33915),q=a.i(19032),r=a.i(6704);let s=(0,p.create)((a,b)=>({variants:[],currentVariant:null,isLoading:!1,fetchVariants:async b=>{a({isLoading:!0});try{let c=await q.variantsAPI.getAll(b);a({variants:c.data.data,isLoading:!1})}catch(b){a({isLoading:!1})}},fetchVariant:async b=>{a({isLoading:!0});try{let c=await q.variantsAPI.getOne(b);a({currentVariant:c.data.data,isLoading:!1})}catch(b){a({isLoading:!1})}},createVariant:async(b,c)=>{a({isLoading:!0});try{let d=(await q.variantsAPI.create(b,c)).data.data;return a(a=>({variants:[...a.variants,d],isLoading:!1})),r.toast.success("Variant তৈরি হয়েছে!"),d}catch(b){return a({isLoading:!1}),null}},updateVariant:async(b,c)=>{try{let d=(await q.variantsAPI.update(b,c)).data.data;return a(a=>({variants:a.variants.map(a=>a._id===b?d:a),currentVariant:a.currentVariant?._id===b?d:a.currentVariant})),r.toast.success("Variant আপডেট হয়েছে!"),!0}catch(a){return!1}},deleteVariant:async b=>{try{return await q.variantsAPI.delete(b),a(a=>({variants:a.variants.filter(a=>a._id!==b)})),r.toast.success("Variant ডিলিট হয়েছে!"),!0}catch(a){return!1}},updateVariantStatus:async(b,c)=>{try{let d=(await q.variantsAPI.updateStatus(b,c)).data.data;return a(a=>({variants:a.variants.map(a=>a._id===b?d:a)})),r.toast.success(`Variant ${c} হয়েছে!`),!0}catch(a){return!1}},setCurrentVariant:b=>{a({currentVariant:b})}}));var t=a.i(83456),u=a.i(68114);function v(){let a=(0,d.useParams)().siteId,{variants:g,fetchVariants:p,createVariant:q,deleteVariant:r,updateVariantStatus:v,isLoading:w}=s(),{currentSite:x,fetchSite:y}=(0,t.useSites)(),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)({name:"",key:"",description:"",headline:"",subheadline:"",ctaText:"",ctaColor:"#3B82F6",layout:"centered"});(0,c.useEffect)(()=>{a&&(y(a),p(a))},[a]);let H=async b=>{b.preventDefault();let c={name:F.name,key:F.key,description:F.description,content:{headline:F.headline,subheadline:F.subheadline,ctaText:F.ctaText,ctaColor:F.ctaColor,layout:F.layout}};await q(a,c)&&(A(!1),G({name:"",key:"",description:"",headline:"",subheadline:"",ctaText:"",ctaColor:"#3B82F6",layout:"centered"}))},I=async a=>{confirm("আপনি কি নিশ্চিত এই variant delete করতে চান?")&&await r(a)},J=async(a,b)=>{await v(a,"active"===b?"paused":"active")},K=a=>{E(a),C(!0)};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Variants"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:[x?.name," এর জন্য content variants"]})]}),(0,b.jsxs)(l.Button,{onClick:()=>A(!0),children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"New Variant"]})]}),w?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):0===g.length?(0,b.jsx)(k.Card,{children:(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No variants yet"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:"প্রথম variant তৈরি করে শুরু করুন"}),(0,b.jsxs)(l.Button,{onClick:()=>A(!0),children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4 mr-2"}),"Create First Variant"]})]})}):(0,b.jsx)("div",{className:"space-y-4",children:g.map(a=>(0,b.jsx)(k.Card,{children:(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-48 h-32 bg-gray-100 rounded-lg flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>K(a),children:(0,b.jsxs)("div",{className:"text-center p-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-sm mb-1",children:a.content.headline||"No headline"}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:a.content.subheadline||"No subheadline"}),(0,b.jsx)("button",{className:"px-3 py-1 text-xs rounded",style:{backgroundColor:a.content.ctaColor},children:a.content.ctaText||"CTA"})]})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Key: ",(0,b.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:a.key})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`
                        px-3 py-1 rounded text-sm font-medium
                        ${"active"===a.status?"bg-green-100 text-green-800":"paused"===a.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}
                      `,children:a.status}),a.isControl&&(0,b.jsx)("div",{className:"px-3 py-1 rounded text-sm font-medium bg-blue-100 text-blue-800",children:"Control"})]})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Impressions"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,u.formatNumber)(a.metrics.impressions)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Clicks"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,u.formatNumber)(a.metrics.clicks)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Conversions"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,u.formatNumber)(a.metrics.conversions)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"CVR"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,u.formatPercentage)(a.metrics.conversionRate)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"ghost",onClick:()=>K(a),children:[(0,b.jsx)(j.Eye,{className:"w-4 h-4 mr-1"}),"Preview"]}),(0,b.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>J(a._id,a.status),children:"active"===a.status?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i,{className:"w-4 h-4 mr-1"}),"Pause"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"w-4 h-4 mr-1"}),"Activate"]})}),!a.isControl&&(0,b.jsxs)(l.Button,{size:"sm",variant:"ghost",onClick:()=>I(a._id),className:"text-red-600 hover:bg-red-50",children:[(0,b.jsx)(f.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]})},a._id))}),(0,b.jsx)(m.Modal,{isOpen:z,onClose:()=>A(!1),title:"Create New Variant",size:"lg",children:(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(n.Input,{label:"Variant Name",type:"text",required:!0,value:F.name,onChange:a=>G({...F,name:a.target.value}),placeholder:"High Intent Hero"}),(0,b.jsx)(n.Input,{label:"Variant Key",type:"text",required:!0,value:F.key,onChange:a=>G({...F,key:a.target.value}),placeholder:"high_intent"})]}),(0,b.jsx)(n.Input,{label:"Description (optional)",type:"text",value:F.description,onChange:a=>G({...F,description:a.target.value}),placeholder:"For visitors with high purchase intent"}),(0,b.jsx)("hr",{className:"my-4"}),(0,b.jsx)("h4",{className:"font-semibold text-gray-900",children:"Content"}),(0,b.jsx)(n.Input,{label:"Headline",type:"text",required:!0,value:F.headline,onChange:a=>G({...F,headline:a.target.value}),placeholder:"Limited Time Offer"}),(0,b.jsx)(n.Input,{label:"Subheadline",type:"text",required:!0,value:F.subheadline,onChange:a=>G({...F,subheadline:a.target.value}),placeholder:"Get 30% off your first purchase"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(n.Input,{label:"CTA Text",type:"text",required:!0,value:F.ctaText,onChange:a=>G({...F,ctaText:a.target.value}),placeholder:"Claim Discount"}),(0,b.jsx)(n.Input,{label:"CTA Color",type:"color",required:!0,value:F.ctaColor,onChange:a=>G({...F,ctaColor:a.target.value})})]}),(0,b.jsx)(o.Select,{label:"Layout",value:F.layout,onChange:a=>G({...F,layout:a.target.value}),options:[{value:"centered",label:"Centered"},{value:"left",label:"Left Aligned"},{value:"right",label:"Right Aligned"},{value:"split",label:"Split Screen"}]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(l.Button,{type:"button",variant:"secondary",onClick:()=>A(!1),className:"flex-1",children:"Cancel"}),(0,b.jsx)(l.Button,{type:"submit",className:"flex-1",children:"Create Variant"})]})]})}),(0,b.jsx)(m.Modal,{isOpen:B,onClose:()=>C(!1),title:"Variant Preview",size:"xl",children:D&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gray-50 rounded-lg p-8",children:(0,b.jsxs)("div",{className:`
                ${"centered"===D.content.layout?"text-center":""}
                ${"left"===D.content.layout?"text-left":""}
                ${"right"===D.content.layout?"text-right":""}
              `,children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:D.content.headline}),(0,b.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:D.content.subheadline}),(0,b.jsx)("button",{className:"px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:D.content.ctaColor},children:D.content.ctaText})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Layout"}),(0,b.jsx)("p",{className:"font-medium",children:D.content.layout})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"CTA Color"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:D.content.ctaColor}}),(0,b.jsx)("code",{className:"text-sm",children:D.content.ctaColor})]})]})]})]})})]})}a.s(["default",()=>v],40840)}];

//# sourceMappingURL=_d4205a9f._.js.map