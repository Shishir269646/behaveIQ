(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=(0,t.forwardRef)(({className:e,variant:t="primary",size:r="md",isLoading:i,children:c,disabled:l,...n},d)=>(0,s.jsxs)("button",{ref:d,className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r],(l||i)&&"opacity-50 cursor-not-allowed",e),disabled:l||i,...n,children:[i&&(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]}));r.displayName="Button",e.s(["Button",0,r])},39964,3793,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(75157);let r=(0,t.forwardRef)(({className:e,title:t,subtitle:r,action:i,children:c,...l},n)=>(0,s.jsxs)("div",{ref:n,className:(0,a.cn)("bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",e),...l,children:[(t||r||i)&&(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[t&&(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r})]}),i&&(0,s.jsx)("div",{children:i})]}),(0,s.jsx)("div",{className:"p-6",children:c})]}));r.displayName="Card",e.s(["Card",0,r],39964);var i=e.i(6344),c=e.i(9165),l=e.i(5766);let n=(0,i.create)((e,s)=>({sites:[],currentSite:null,isLoading:!1,fetchSites:async()=>{e({isLoading:!0});try{let s=await c.sitesAPI.getAll();e({sites:s.data.data,isLoading:!1})}catch(s){e({isLoading:!1})}},fetchSite:async s=>{e({isLoading:!0});try{let t=await c.sitesAPI.getOne(s);e({currentSite:t.data.data,isLoading:!1})}catch(s){e({isLoading:!1})}},createSite:async s=>{e({isLoading:!0});try{let t=(await c.sitesAPI.create(s)).data.data;return e(e=>({sites:[...e.sites,t],isLoading:!1})),l.toast.success("সাইট তৈরি হয়েছে!"),t}catch(s){return e({isLoading:!1}),null}},updateSite:async(s,t)=>{try{let a=(await c.sitesAPI.update(s,t)).data.data;return e(e=>({sites:e.sites.map(e=>e._id===s?a:e),currentSite:e.currentSite?._id===s?a:e.currentSite})),l.toast.success("সাইট আপডেট হয়েছে!"),!0}catch(e){return!1}},deleteSite:async s=>{try{return await c.sitesAPI.delete(s),e(e=>({sites:e.sites.filter(e=>e._id!==s)})),l.toast.success("সাইট ডিলিট হয়েছে!"),!0}catch(e){return!1}},setCurrentSite:s=>{e({currentSite:s})}}));e.s(["useSites",0,n],3793)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},64568,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(75254);let i=(0,r.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),c=(0,r.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),l=(0,r.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var n=e.i(86536),d=e.i(39616),o=e.i(39964),x=e.i(59544),m=e.i(3793),y=e.i(9165),h=e.i(75157),p=e.i(5766),u=e.i(22016);function g(){let e=(0,a.useParams)(),r=(0,a.useRouter)(),g=e.siteId,{currentSite:j,fetchSite:f}=(0,m.useSites)(),[v,b]=(0,t.useState)(null),[N,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{g&&(f(g),C())},[g]);let C=async()=>{try{let e=await y.sitesAPI.getKeys(g);b(e.data.data)}catch(e){console.error("Failed to load keys")}},k=async()=>{if(confirm("নতুন API key তৈরি করলে পুরনো key কাজ করবে না। নিশ্চিত?"))try{let e=await y.sitesAPI.regenerateKey(g);b(e.data.data),p.toast.success("নতুন API key তৈরি হয়েছে")}catch(e){p.toast.error("Failed to regenerate key")}},I=(e,s)=>{(0,h.copyToClipboard)(e),p.toast.success(`${s} copied!`)};return j?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>r.push("/sites"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(i,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:j.name}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:j.domain})]}),(0,s.jsx)(u.default,{href:`/sites/${g}/settings`,children:(0,s.jsxs)(x.Button,{variant:"secondary",children:[(0,s.jsx)(d.Settings,{className:"w-4 h-4 mr-2"}),"Settings"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)(o.Card,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Visitors"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:(0,h.formatNumber)(j.stats.totalVisitors)})]})}),(0,s.jsx)(o.Card,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Events"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:(0,h.formatNumber)(j.stats.totalEvents)})]})}),(0,s.jsx)(o.Card,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Conversions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:(0,h.formatNumber)(j.stats.totalConversions)})]})}),(0,s.jsx)(o.Card,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Conversion Rate"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:(0,h.formatPercentage)(j.stats.conversionRate)})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)(u.default,{href:`/sites/${g}/variants`,children:(0,s.jsx)(o.Card,{className:"hover:border-primary-300 transition-colors cursor-pointer",children:(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)(n.Eye,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Variants"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage content variants"})]})})}),(0,s.jsx)(u.default,{href:`/sites/${g}/analytics`,children:(0,s.jsx)(o.Card,{className:"hover:border-primary-300 transition-colors cursor-pointer",children:(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)(n.Eye,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Analytics"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"View detailed analytics"})]})})}),(0,s.jsx)(u.default,{href:`/sites/${g}/settings`,children:(0,s.jsx)(o.Card,{className:"hover:border-primary-300 transition-colors cursor-pointer",children:(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)(d.Settings,{className:"w-8 h-8 text-primary-600 mx-auto mb-2"}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure site settings"})]})})})]}),(0,s.jsx)(o.Card,{title:"API Keys",subtitle:"আপনার website এ SDK integrate করার জন্য",action:(0,s.jsxs)(x.Button,{variant:"secondary",size:"sm",onClick:k,children:[(0,s.jsx)(l,{className:"w-4 h-4 mr-2"}),"Regenerate"]}),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site ID"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:v?.siteId||j.siteId,readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),(0,s.jsx)(x.Button,{variant:"secondary",onClick:()=>I(v?.siteId||j.siteId,"Site ID"),children:(0,s.jsx)(c,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:N?"text":"password",value:v?.apiKey||"••••••••••••••••",readOnly:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),(0,s.jsx)(x.Button,{variant:"secondary",onClick:()=>w(!N),children:(0,s.jsx)(n.Eye,{className:"w-4 h-4"})}),(0,s.jsx)(x.Button,{variant:"secondary",onClick:()=>I(v?.apiKey,"API Key"),children:(0,s.jsx)(c,{className:"w-4 h-4"})})]})]})]})}),(0,s.jsx)(o.Card,{title:"Installation",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"আপনার website এ এই code যোগ করুন (closing </body> tag এর আগে):"}),(0,s.jsx)("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:`<script>
(function() {
  var script = document.createElement('script');
  script.src = 'https://cdn.personaflow.ai/sdk.js';
  script.onload = function() {
    PersonaFlow.init({
      siteId: '${j.siteId}',
      apiKey: '${v?.apiKey||"YOUR_API_KEY"}'
    });
  };
  document.body.appendChild(script);
})();
</script>`}),(0,s.jsxs)(x.Button,{variant:"secondary",onClick:()=>{let e=`<script>
(function() {
  var script = document.createElement('script');
  script.src = 'https://cdn.personaflow.ai/sdk.js';
  script.onload = function() {
    PersonaFlow.init({
      siteId: '${j.siteId}',
      apiKey: '${v?.apiKey||"YOUR_API_KEY"}'
    });
  };
  document.body.appendChild(script);
})();
</script>`;(0,h.copyToClipboard)(e),p.toast.success("Code copied!")},children:[(0,s.jsx)(c,{className:"w-4 h-4 mr-2"}),"Copy Code"]})]})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}e.s(["default",()=>g],64568)}]);