(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,3793,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=(0,a.forwardRef)(({className:e,title:a,subtitle:r,action:i,children:l,...n},c)=>(0,t.jsxs)("div",{ref:c,className:(0,s.cn)("bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",e),...n,children:[(a||r||i)&&(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:r})]}),i&&(0,t.jsx)("div",{children:i})]}),(0,t.jsx)("div",{className:"p-6",children:l})]}));r.displayName="Card",e.s(["Card",0,r],39964);var i=e.i(6344),l=e.i(9165),n=e.i(5766);let c=(0,i.create)((e,t)=>({sites:[],currentSite:null,isLoading:!1,fetchSites:async()=>{e({isLoading:!0});try{let t=await l.sitesAPI.getAll();e({sites:t.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},fetchSite:async t=>{e({isLoading:!0});try{let a=await l.sitesAPI.getOne(t);e({currentSite:a.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},createSite:async t=>{e({isLoading:!0});try{let a=(await l.sitesAPI.create(t)).data.data;return e(e=>({sites:[...e.sites,a],isLoading:!1})),n.toast.success("সাইট তৈরি হয়েছে!"),a}catch(t){return e({isLoading:!1}),null}},updateSite:async(t,a)=>{try{let s=(await l.sitesAPI.update(t,a)).data.data;return e(e=>({sites:e.sites.map(e=>e._id===t?s:e),currentSite:e.currentSite?._id===t?s:e.currentSite})),n.toast.success("সাইট আপডেট হয়েছে!"),!0}catch(e){return!1}},deleteSite:async t=>{try{return await l.sitesAPI.delete(t),e(e=>({sites:e.sites.filter(e=>e._id!==t)})),n.toast.success("সাইট ডিলিট হয়েছে!"),!0}catch(e){return!1}},setCurrentSite:t=>{e({currentSite:t})}}));e.s(["useSites",0,c],3793)},67073,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=(0,a.forwardRef)(({className:e,label:a,error:r,options:i,...l},n)=>(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,t.jsx)("select",{ref:n,className:(0,s.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",r&&"border-red-500 focus:ring-red-500",e),...l,children:i.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),r&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]}));r.displayName="Select",e.s(["Select",0,r])},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},59544,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=(0,a.forwardRef)(({className:e,variant:a="primary",size:r="md",isLoading:i,children:l,disabled:n,...c},d)=>(0,t.jsxs)("button",{ref:d,className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r],(n||i)&&"opacity-50 cursor-not-allowed",e),disabled:n||i,...c,children:[i&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}));r.displayName="Button",e.s(["Button",0,r])},3812,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=(0,a.forwardRef)(({className:e,label:a,error:r,...i},l)=>(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,t.jsx)("input",{ref:l,className:(0,s.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",r&&"border-red-500 focus:ring-red-500",e),...i}),r&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]}));r.displayName="Input",e.s(["Input",0,r])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},7233,32098,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233);var s=e.i(43476),r=e.i(71645);let i=(0,t.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var l=e.i(75157);function n({isOpen:e,onClose:t,title:a,children:n,size:c="md"}){return((0,r.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),e)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,s.jsxs)("div",{className:(0,l.cn)("relative w-full bg-white rounded-xl shadow-xl",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[c]),children:[a&&(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:a}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,s.jsx)(i,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-4",children:n})]})})]}):null}e.s(["Modal",()=>n],32098)},82331,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(7233),i=e.i(27612),l=e.i(75254);let n=(0,l.default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),c=(0,l.default)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var d=e.i(86536),o=e.i(39964),x=e.i(59544),u=e.i(32098),m=e.i(3812),h=e.i(67073),y=e.i(6344),g=e.i(9165),p=e.i(5766);let v=(0,y.create)((e,t)=>({variants:[],currentVariant:null,isLoading:!1,fetchVariants:async t=>{e({isLoading:!0});try{let a=await g.variantsAPI.getAll(t);e({variants:a.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},fetchVariant:async t=>{e({isLoading:!0});try{let a=await g.variantsAPI.getOne(t);e({currentVariant:a.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},createVariant:async(t,a)=>{e({isLoading:!0});try{let s=(await g.variantsAPI.create(t,a)).data.data;return e(e=>({variants:[...e.variants,s],isLoading:!1})),p.toast.success("Variant তৈরি হয়েছে!"),s}catch(t){return e({isLoading:!1}),null}},updateVariant:async(t,a)=>{try{let s=(await g.variantsAPI.update(t,a)).data.data;return e(e=>({variants:e.variants.map(e=>e._id===t?s:e),currentVariant:e.currentVariant?._id===t?s:e.currentVariant})),p.toast.success("Variant আপডেট হয়েছে!"),!0}catch(e){return!1}},deleteVariant:async t=>{try{return await g.variantsAPI.delete(t),e(e=>({variants:e.variants.filter(e=>e._id!==t)})),p.toast.success("Variant ডিলিট হয়েছে!"),!0}catch(e){return!1}},updateVariantStatus:async(t,a)=>{try{let s=(await g.variantsAPI.updateStatus(t,a)).data.data;return e(e=>({variants:e.variants.map(e=>e._id===t?s:e)})),p.toast.success(`Variant ${a} হয়েছে!`),!0}catch(e){return!1}},setCurrentVariant:t=>{e({currentVariant:t})}}));var j=e.i(3793),f=e.i(75157);function b(){let e=(0,s.useParams)().siteId,{variants:l,fetchVariants:y,createVariant:g,deleteVariant:p,updateVariantStatus:b,isLoading:N}=v(),{currentSite:w,fetchSite:C}=(0,j.useSites)(),[k,V]=(0,a.useState)(!1),[S,L]=(0,a.useState)(!1),[P,A]=(0,a.useState)(null),[I,T]=(0,a.useState)({name:"",key:"",description:"",headline:"",subheadline:"",ctaText:"",ctaColor:"#3B82F6",layout:"centered"});(0,a.useEffect)(()=>{e&&(C(e),y(e))},[e]);let B=async t=>{t.preventDefault();let a={name:I.name,key:I.key,description:I.description,content:{headline:I.headline,subheadline:I.subheadline,ctaText:I.ctaText,ctaColor:I.ctaColor,layout:I.layout}};await g(e,a)&&(V(!1),T({name:"",key:"",description:"",headline:"",subheadline:"",ctaText:"",ctaColor:"#3B82F6",layout:"centered"}))},M=async e=>{confirm("আপনি কি নিশ্চিত এই variant delete করতে চান?")&&await p(e)},_=async(e,t)=>{await b(e,"active"===t?"paused":"active")},z=e=>{A(e),L(!0)};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Variants"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:[w?.name," এর জন্য content variants"]})]}),(0,t.jsxs)(x.Button,{onClick:()=>V(!0),children:[(0,t.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),"New Variant"]})]}),N?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):0===l.length?(0,t.jsx)(o.Card,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No variants yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"প্রথম variant তৈরি করে শুরু করুন"}),(0,t.jsxs)(x.Button,{onClick:()=>V(!0),children:[(0,t.jsx)(r.Plus,{className:"w-4 h-4 mr-2"}),"Create First Variant"]})]})}):(0,t.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,t.jsx)(o.Card,{children:(0,t.jsxs)("div",{className:"flex items-start gap-6",children:[(0,t.jsx)("div",{className:"w-48 h-32 bg-gray-100 rounded-lg flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>z(e),children:(0,t.jsxs)("div",{className:"text-center p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-sm mb-1",children:e.content.headline||"No headline"}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.content.subheadline||"No subheadline"}),(0,t.jsx)("button",{className:"px-3 py-1 text-xs rounded",style:{backgroundColor:e.content.ctaColor},children:e.content.ctaText||"CTA"})]})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Key: ",(0,t.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:e.key})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`
                        px-3 py-1 rounded text-sm font-medium
                        ${"active"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}
                      `,children:e.status}),e.isControl&&(0,t.jsx)("div",{className:"px-3 py-1 rounded text-sm font-medium bg-blue-100 text-blue-800",children:"Control"})]})]}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Impressions"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,f.formatNumber)(e.metrics.impressions)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Clicks"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,f.formatNumber)(e.metrics.clicks)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Conversions"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,f.formatNumber)(e.metrics.conversions)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"CVR"}),(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,f.formatPercentage)(e.metrics.conversionRate)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(x.Button,{size:"sm",variant:"ghost",onClick:()=>z(e),children:[(0,t.jsx)(d.Eye,{className:"w-4 h-4 mr-1"}),"Preview"]}),(0,t.jsx)(x.Button,{size:"sm",variant:"ghost",onClick:()=>_(e._id,e.status),children:"active"===e.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-1"}),"Pause"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{className:"w-4 h-4 mr-1"}),"Activate"]})}),!e.isControl&&(0,t.jsxs)(x.Button,{size:"sm",variant:"ghost",onClick:()=>M(e._id),className:"text-red-600 hover:bg-red-50",children:[(0,t.jsx)(i.Trash2,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]})]})},e._id))}),(0,t.jsx)(u.Modal,{isOpen:k,onClose:()=>V(!1),title:"Create New Variant",size:"lg",children:(0,t.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(m.Input,{label:"Variant Name",type:"text",required:!0,value:I.name,onChange:e=>T({...I,name:e.target.value}),placeholder:"High Intent Hero"}),(0,t.jsx)(m.Input,{label:"Variant Key",type:"text",required:!0,value:I.key,onChange:e=>T({...I,key:e.target.value}),placeholder:"high_intent"})]}),(0,t.jsx)(m.Input,{label:"Description (optional)",type:"text",value:I.description,onChange:e=>T({...I,description:e.target.value}),placeholder:"For visitors with high purchase intent"}),(0,t.jsx)("hr",{className:"my-4"}),(0,t.jsx)("h4",{className:"font-semibold text-gray-900",children:"Content"}),(0,t.jsx)(m.Input,{label:"Headline",type:"text",required:!0,value:I.headline,onChange:e=>T({...I,headline:e.target.value}),placeholder:"Limited Time Offer"}),(0,t.jsx)(m.Input,{label:"Subheadline",type:"text",required:!0,value:I.subheadline,onChange:e=>T({...I,subheadline:e.target.value}),placeholder:"Get 30% off your first purchase"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(m.Input,{label:"CTA Text",type:"text",required:!0,value:I.ctaText,onChange:e=>T({...I,ctaText:e.target.value}),placeholder:"Claim Discount"}),(0,t.jsx)(m.Input,{label:"CTA Color",type:"color",required:!0,value:I.ctaColor,onChange:e=>T({...I,ctaColor:e.target.value})})]}),(0,t.jsx)(h.Select,{label:"Layout",value:I.layout,onChange:e=>T({...I,layout:e.target.value}),options:[{value:"centered",label:"Centered"},{value:"left",label:"Left Aligned"},{value:"right",label:"Right Aligned"},{value:"split",label:"Split Screen"}]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(x.Button,{type:"button",variant:"secondary",onClick:()=>V(!1),className:"flex-1",children:"Cancel"}),(0,t.jsx)(x.Button,{type:"submit",className:"flex-1",children:"Create Variant"})]})]})}),(0,t.jsx)(u.Modal,{isOpen:S,onClose:()=>L(!1),title:"Variant Preview",size:"xl",children:P&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gray-50 rounded-lg p-8",children:(0,t.jsxs)("div",{className:`
                ${"centered"===P.content.layout?"text-center":""}
                ${"left"===P.content.layout?"text-left":""}
                ${"right"===P.content.layout?"text-right":""}
              `,children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:P.content.headline}),(0,t.jsx)("p",{className:"text-xl text-gray-600 mb-6",children:P.content.subheadline}),(0,t.jsx)("button",{className:"px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:P.content.ctaColor},children:P.content.ctaText})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Layout"}),(0,t.jsx)("p",{className:"font-medium",children:P.content.layout})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"CTA Color"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:P.content.ctaColor}}),(0,t.jsx)("code",{className:"text-sm",children:P.content.ctaColor})]})]})]})]})})]})}e.s(["default",()=>b],82331)}]);