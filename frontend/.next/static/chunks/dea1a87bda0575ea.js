(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59544,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=(0,a.forwardRef)(({className:e,variant:a="primary",size:i="md",isLoading:r,children:l,disabled:n,...d},c)=>(0,t.jsxs)("button",{ref:c,className:(0,s.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",{primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[a],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[i],(n||r)&&"opacity-50 cursor-not-allowed",e),disabled:n||r,...d,children:[r&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]}));i.displayName="Button",e.s(["Button",0,i])},3812,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=(0,a.forwardRef)(({className:e,label:a,error:i,...r},l)=>(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,t.jsx)("input",{ref:l,className:(0,s.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",i&&"border-red-500 focus:ring-red-500",e),...r}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]}));i.displayName="Input",e.s(["Input",0,i])},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},39964,3793,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=(0,a.forwardRef)(({className:e,title:a,subtitle:i,action:r,children:l,...n},d)=>(0,t.jsxs)("div",{ref:d,className:(0,s.cn)("bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",e),...n,children:[(a||i||r)&&(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[a&&(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a}),i&&(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:i})]}),r&&(0,t.jsx)("div",{children:r})]}),(0,t.jsx)("div",{className:"p-6",children:l})]}));i.displayName="Card",e.s(["Card",0,i],39964);var r=e.i(6344),l=e.i(9165),n=e.i(5766);let d=(0,r.create)((e,t)=>({sites:[],currentSite:null,isLoading:!1,fetchSites:async()=>{e({isLoading:!0});try{let t=await l.sitesAPI.getAll();e({sites:t.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},fetchSite:async t=>{e({isLoading:!0});try{let a=await l.sitesAPI.getOne(t);e({currentSite:a.data.data,isLoading:!1})}catch(t){e({isLoading:!1})}},createSite:async t=>{e({isLoading:!0});try{let a=(await l.sitesAPI.create(t)).data.data;return e(e=>({sites:[...e.sites,a],isLoading:!1})),n.toast.success("সাইট তৈরি হয়েছে!"),a}catch(t){return e({isLoading:!1}),null}},updateSite:async(t,a)=>{try{let s=(await l.sitesAPI.update(t,a)).data.data;return e(e=>({sites:e.sites.map(e=>e._id===t?s:e),currentSite:e.currentSite?._id===t?s:e.currentSite})),n.toast.success("সাইট আপডেট হয়েছে!"),!0}catch(e){return!1}},deleteSite:async t=>{try{return await l.sitesAPI.delete(t),e(e=>({sites:e.sites.filter(e=>e._id!==t)})),n.toast.success("সাইট ডিলিট হয়েছে!"),!0}catch(e){return!1}},setCurrentSite:t=>{e({currentSite:t})}}));e.s(["useSites",0,d],3793)},67073,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let i=(0,a.forwardRef)(({className:e,label:a,error:i,options:r,...l},n)=>(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,t.jsx)("select",{ref:n,className:(0,s.cn)("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:ring-2 focus:ring-primary-500 focus:border-transparent","outline-none transition-all duration-200",i&&"border-red-500 focus:ring-red-500",e),...l,children:r.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),i&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i})]}));i.displayName="Select",e.s(["Select",0,i])},61189,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),i=e.i(75254);let r=(0,i.default)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var l=e.i(27612);let n=(0,i.default)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var d=e.i(39964),c=e.i(59544),o=e.i(3812),u=e.i(67073),m=e.i(3793),x=e.i(5766);function y(){let e=(0,s.useParams)(),i=(0,s.useRouter)(),y=e.siteId,{currentSite:h,fetchSite:g,updateSite:p,deleteSite:b}=(0,m.useSites)(),[f,v]=(0,a.useState)({name:"",domain:"",cookielessMode:!1,botFilterEnabled:!0,privacyMode:"standard",dataRetentionDays:90,status:"active"}),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{y&&g(y)},[y]),(0,a.useEffect)(()=>{h&&v({name:h.name,domain:h.domain,cookielessMode:h.settings.cookielessMode,botFilterEnabled:h.settings.botFilterEnabled,privacyMode:h.settings.privacyMode,dataRetentionDays:h.settings.dataRetentionDays,status:h.status})},[h]);let k=async e=>{e.preventDefault(),N(!0),await p(y,{name:f.name,domain:f.domain,settings:{cookielessMode:f.cookielessMode,botFilterEnabled:f.botFilterEnabled,privacyMode:f.privacyMode,dataRetentionDays:f.dataRetentionDays},status:f.status}),N(!1)},S=async()=>{let e=prompt("আপনি কি সত্যিই এই site মুছে ফেলতে চান? এটি পুনরুদ্ধার করা যাবে না।\n\nনিশ্চিত করতে site name টাইপ করুন:");e===h?.name?await b(y)&&i.push("/sites"):null!==e&&x.toast.error("Site name মিলেনি")};return h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:[h.name," এর configuration manage করুন"]})]}),(0,t.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,t.jsx)(d.Card,{title:"Basic Information",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(o.Input,{label:"Site Name",type:"text",required:!0,value:f.name,onChange:e=>v({...f,name:e.target.value})}),(0,t.jsx)(o.Input,{label:"Domain",type:"text",required:!0,value:f.domain,onChange:e=>v({...f,domain:e.target.value})}),(0,t.jsx)(u.Select,{label:"Status",value:f.status,onChange:e=>v({...f,status:e.target.value}),options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"suspended",label:"Suspended"}]})]})}),(0,t.jsx)(d.Card,{title:"Privacy Settings",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"cookielessMode",checked:f.cookielessMode,onChange:e=>v({...f,cookielessMode:e.target.checked}),className:"mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"cookielessMode",className:"font-medium text-gray-900 cursor-pointer",children:"Cookieless Mode"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Cookie ছাড়া tracking করুন (GDPR-friendly)"})]})]}),(0,t.jsx)(u.Select,{label:"Privacy Mode",value:f.privacyMode,onChange:e=>v({...f,privacyMode:e.target.value}),options:[{value:"standard",label:"Standard"},{value:"strict",label:"Strict (Maximum Privacy)"}]}),(0,t.jsx)(o.Input,{label:"Data Retention Days",type:"number",min:"1",max:"365",value:f.dataRetentionDays,onChange:e=>v({...f,dataRetentionDays:parseInt(e.target.value)})})]})}),(0,t.jsx)(d.Card,{title:"Security Settings",children:(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"botFilterEnabled",checked:f.botFilterEnabled,onChange:e=>v({...f,botFilterEnabled:e.target.checked}),className:"mt-1"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"botFilterEnabled",className:"font-medium text-gray-900 cursor-pointer",children:"Bot Detection"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"স্বয়ংক্রিয়ভাবে bot traffic filter করুন"})]})]})})}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(c.Button,{type:"submit",isLoading:j,children:[(0,t.jsx)(r,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),(0,t.jsx)(d.Card,{children:(0,t.jsx)("div",{className:"border-2 border-red-200 rounded-lg p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(n,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Danger Zone"}),(0,t.jsx)("p",{className:"text-sm text-red-700 mb-4",children:"সাবধান! এই site মুছে ফেললে সব data, variants, এবং analytics হারিয়ে যাবে। এটি পুনরুদ্ধার করা যাবে না।"}),(0,t.jsxs)(c.Button,{variant:"danger",onClick:S,children:[(0,t.jsx)(l.Trash2,{className:"w-4 h-4 mr-2"}),"Delete Site"]})]})]})})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}e.s(["default",()=>y],61189)}]);