/*! For license information please see behaveiq.min.js.LICENSE.txt */
var BEHAVEIQ;(()=>{var t={72(){}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){var t,n,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(e,r,i,a){var c=r&&r.prototype instanceof s?r:s,f=Object.create(c.prototype);return o(f,"_invoke",function(e,r,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function h(e,r){for(a=e,c=r,n=0;!l&&s&&!o&&n<f.length;n++){var o,i=f[n],h=p.p,y=i[2];e>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=e<2&&h<i[1])?(a=0,p.v=r,p.n=i[1]):h<y&&(o=e<3||i[0]>r||r>y)&&(i[4]=e,i[5]=r,p.n=y,a=0))}if(o||e>1)return u;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&h(f,y),a=f,c=y;(n=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),h(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(l=p.n<0)?c:e.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:n,done:l}}}(e,i,a),!0),f}var u={};function s(){}function f(){}function l(){}n=Object.getPrototypeOf;var p=[][i]?n(n([][i]())):(o(n={},i,function(){return this}),n),h=l.prototype=s.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,o(t,a,"GeneratorFunction")),t.prototype=Object.create(h),t}return f.prototype=l,o(h,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,a,"GeneratorFunction"),o(h),o(h,a,"Generator"),o(h,i,function(){return this}),o(h,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:y}})()}function o(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,n,r){function a(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},o(t,e,n,r)}function i(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function c(t){i(a,r,o,c,u,"next",t)}function u(t){i(a,r,o,c,u,"throw",t)}c(void 0)})}}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}n.d(r,{default:()=>C});const s=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},n=[{key:"generate",value:(f=a(e().m(function t(){var n,r,o,i,a;return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getCanvasFingerprint();case 1:return o=t.v,t.n=2,this.getWebGLFingerprint();case 2:return i=t.v,t.n=3,this.getFontFingerprint();case 3:return a=t.v,n={canvas:o,webgl:i,fonts:a},t.n=4,this.hashComponents(n);case 4:return r=t.v,t.a(2,{hash:r,components:n})}},t,this)})),function(){return f.apply(this,arguments)})},{key:"getCanvasFingerprint",value:(s=a(e().m(function t(){var n,r;return e().w(function(t){for(;;)if(0===t.n)return n=document.createElement("canvas"),r=n.getContext("2d"),n.width=200,n.height=50,r.textBaseline="top",r.font="14px Arial",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.fillText("BehaveIQ",2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.fillRect(10,10,50,50),t.a(2,n.toDataURL())},t)})),function(){return s.apply(this,arguments)})},{key:"getWebGLFingerprint",value:(u=a(e().m(function t(){var n,r,o,i,a;return e().w(function(t){for(;;)switch(t.n){case 0:if(n=document.createElement("canvas"),r=n.getContext("webgl")||n.getContext("experimental-webgl")){t.n=1;break}return t.a(2,"not_supported");case 1:if(o=r.getExtension("WEBGL_debug_renderer_info")){t.n=2;break}return t.a(2,"no_debug_info");case 2:return i=r.getParameter(o.UNMASKED_VENDOR_WEBGL),a=r.getParameter(o.UNMASKED_RENDERER_WEBGL),t.a(2,"".concat(i,"~").concat(a))}},t)})),function(){return u.apply(this,arguments)})},{key:"getFontFingerprint",value:(i=a(e().m(function t(){var n,r,o,i,a,c,u,s;return e().w(function(t){for(;;)if(0===t.n)return n=["monospace","sans-serif","serif"],r=["Arial","Verdana","Times New Roman","Courier New","Georgia","Palatino","Garamond","Comic Sans MS"],o=[],i="mmmmmmmmmmlli",a="72px",c=document.createElement("canvas"),u=c.getContext("2d"),s={},n.forEach(function(t){u.font="".concat(a," ").concat(t),s[t]=u.measureText(i).width}),r.forEach(function(t){var e=!1;n.forEach(function(n){u.font="".concat(a," ").concat(t,", ").concat(n),u.measureText(i).width!==s[n]&&(e=!0)}),e&&o.push(t)}),t.a(2,o)},t)})),function(){return i.apply(this,arguments)})},{key:"hashComponents",value:(o=a(e().m(function t(n){var r,o,i,a;return e().w(function(t){for(;;)switch(t.n){case 0:return r=JSON.stringify(n),o=(new TextEncoder).encode(r),t.n=1,crypto.subtle.digest("SHA-256",o);case 1:return i=t.v,a=Array.from(new Uint8Array(i)),t.a(2,a.map(function(t){return t.toString(16).padStart(2,"0")}).join(""))}},t)})),function(t){return o.apply(this,arguments)})}],n&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i,u,s,f}();var f=n(72),l=n.n(f);function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return y(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],h=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&h(f,y),c=f,u=y;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(y(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,y(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,y(l,"constructor",s),y(s,"constructor",u),u.displayName="GeneratorFunction",y(s,o,"GeneratorFunction"),y(l),y(l,o,"Generator"),y(l,r,function(){return this}),y(l,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:p}})()}function y(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}y=function(t,e,n,r){function i(e,n){y(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},y(t,e,n,r)}function d(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==p(e)?e:e+""}const b=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sdk=e,this.checkInterval=1e4},e=[{key:"start",value:function(){var t=this;setInterval(function(){return t.analyzeEmotion()},this.checkInterval)}},{key:"analyzeEmotion",value:(r=h().m(function t(){var e,n;return h().w(function(t){for(;;)switch(t.n){case 0:if(this.sdk.userId&&this.sdk.sessionId){t.n=1;break}return t.a(2);case 1:return e={mouseMovements:this.sdk.tracker.mouseData,scrollData:this.sdk.tracker.scrollData,clickData:this.sdk.tracker.clickData,timeOnPage:Date.now()-this.sdk.sessionStartTime,currentPage:window.location.href},t.n=2,this.sdk.request("/emotions/detect",{method:"POST",body:{userId:this.sdk.userId,sessionId:this.sdk.sessionId,behaviorData:e}});case 2:(n=t.v).success&&"none"!==n.data.response.action&&this.showEmotionResponse(n.data);case 3:return t.a(2)}},t,this)}),o=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){d(i,n,o,a,c,"next",t)}function c(t){d(i,n,o,a,c,"throw",t)}a(void 0)})},function(){return o.apply(this,arguments)})},{key:"showEmotionResponse",value:function(t){t.emotion;var e=t.response;"show_help_chat"===e.action?this.showHelpButton(e.message):"show_social_proof"===e.action?this.showSocialProof(e.urgencyMessage):"show_guide"===e.action&&this.showGuide(e.message)}},{key:"showHelpButton",value:function(t){var e=document.createElement("div");e.id="behaveiq-help",e.innerHTML='\n        <div style="position: fixed; bottom: 20px; right: 20px; \n                    background: #007bff; color: white; padding: 15px 20px;\n                    border-radius: 50px; cursor: pointer; z-index: 10000;\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);">\n          '.concat(t,"\n        </div>\n      "),document.body.appendChild(e),setTimeout(function(){return e.remove()},5e3)}},{key:"showSocialProof",value:function(t){var e=document.createElement("div");e.id="behaveiq-social",e.innerHTML='\n        <div style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%);\n                    background: #28a745; color: white; padding: 12px 24px;\n                    border-radius: 8px; z-index: 10000;\n                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);">\n          '.concat(t,"\n        </div>\n      "),document.body.appendChild(e),setTimeout(function(){return e.remove()},7e3)}},{key:"showGuide",value:function(t){}}],e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}();function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function w(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return k(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],h=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&h(f,y),c=f,u=y;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(k(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,k(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,k(l,"constructor",s),k(s,"constructor",u),u.displayName="GeneratorFunction",k(s,o,"GeneratorFunction"),k(l),k(l,o,"Generator"),k(l,r,function(){return this}),k(l,"toString",function(){return"[object Generator]"}),(w=function(){return{w:i,m:p}})()}function k(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}k=function(t,e,n,r){function i(e,n){k(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},k(t,e,n,r)}function S(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function x(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}const j=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sdk=e,this.recognition=null,this.isSupported="webkitSpeechRecognition"in window||"SpeechRecognition"in window,this.isSupported){var n=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new n,this.recognition.continuous=!1,this.recognition.lang="en-US"}},e=[{key:"start",value:function(t){var e=this;this.isSupported&&(this.recognition.start(),this.recognition.onresult=function(n){var r=n.results[0][0].transcript;e.searchByVoice(r,t)},this.recognition.onerror=function(t){})}},{key:"searchByVoice",value:(r=w().m(function t(e,n){var r;return w().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.sdk.request("/voice/search",{method:"POST",body:{query:e,userId:this.sdk.userId}});case 1:(r=t.v).success&&n&&n(r.data.results);case 2:return t.a(2)}},t,this)}),o=function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function a(t){S(i,n,o,a,c,"next",t)}function c(t){S(i,n,o,a,c,"throw",t)}a(void 0)})},function(t,e){return o.apply(this,arguments)})}],e&&O(t.prototype,e),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function E(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return T(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function h(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],h=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=h&&((o=n<2&&h<i[1])?(c=0,p.v=r,p.n=i[1]):h<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&h(f,y),c=f,u=y;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),h(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,T(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,T(l,"constructor",s),T(s,"constructor",u),u.displayName="GeneratorFunction",T(s,o,"GeneratorFunction"),T(l),T(l,o,"Generator"),T(l,r,function(){return this}),T(l,"toString",function(){return"[object Generator]"}),(E=function(){return{w:i,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){function i(e,n){T(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},T(t,e,n,r)}function _(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function G(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){_(i,r,o,a,c,"next",t)}function c(t){_(i,r,o,a,c,"throw",t)}a(void 0)})}}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F(r.key),r)}}function F(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}const C=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&e.apiKey&&(this.apiUrl=e.apiUrl||"http://localhost:5000/api",this.apiKey=e.apiKey,this.userId=null,this.sessionId=null,this.fingerprint=null,this.sessionStartTime=Date.now(),this.fingerprintGenerator=new s,this.tracker=new(l())(this),this.emotionTracker=new b(this),this.voiceSearch=new j(this),this.init())},e=[{key:"init",value:(a=G(E().m(function t(){return E().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=1,t.n=2,this.fingerprintGenerator.generate();case 2:return this.fingerprint=t.v,t.n=3,this.identifyUser();case 3:this.tracker.start(),this.emotionTracker.start(),t.n=5;break;case 4:t.p=4,t.v;case 5:case 6:return t.a(2)}},t,this,[[1,4]])})),function(){return a.apply(this,arguments)})},{key:"identifyUser",value:(i=G(E().m(function t(){var e,n,r;return E().w(function(t){for(;;)switch(t.n){case 0:return e=this.getDeviceInfo(),t.n=1,this.getLocation();case 1:return n=t.v,t.n=2,this.request("/identity/identify",{method:"POST",body:{fingerprint:this.fingerprint.hash,deviceInfo:e,fpComponents:this.fingerprint.components,location:n}});case 2:(r=t.v).success&&(this.userId=r.data.userId,this.sessionId=r.data.sessionId,this.persona=r.data.persona);case 3:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"getDeviceInfo",value:function(){var t=navigator.userAgent,e="desktop";/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|rim)|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda /i.test(t.substr(0,4))||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|erw|us)|ah(gl|ki)|ai(ko|ri)|ap(ap|bd|bm|gf|gh|gl|iy)|br(ch|er|ev)|bu(en)|c550|c500|dspn|el(fi|ung)|er(en|ob|re)|ez(go|jp)|fl(ch|in)|frie|g900|gf5g|go(.w|od)|gr(ad|un)|haie|hcit|hd(ad|at)|hg(hp|hs|pl)|ht(ft|tp)|ia(hp|kk|pn)|ip(ck|in|tk)|jig |kddi|keji|kgt|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g50|g51|g70|g80|g90|hpt|ik|in|ip)|li(e4|wn)|mago|ma(te|ui)|mc(ad|ch|lo)|me(rc|ri)|mi(o8|oa|op)|mo(bi|wt)|mt(p1|si)|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|te)|pdxg|pg(13|21|41|61|70|80)|phil(am|zr)|pm(mi|og|wg)|pn(ap|ei)|plcm|pndc|show|sis(a|v)|siwa|sm(al|ar|b3|it)|t5(au|te)|tdg |tel(i|m)|tim |t-mo|tk(wa|wg)|tr(ind|sl)|un(av|go|ww)|ut(ap|ti)|vach|vag |vc(w|nd)|vi(rg|us)|voda|vulc|w3c |wapj|wasm|wj(ck|f)|wonu|x700|yas |your|zeto|zte- /i.test(t.substr(0,4))?e="mobile":/(ipad|tablet|playbook|silk)|(android(?!.*mobile))/i.test(t)&&(e="tablet");var n="Unknown";-1!==t.indexOf("Win")&&(n="Windows"),-1!==t.indexOf("Mac")&&(n="macOS"),-1!==t.indexOf("Linux")&&(n="Linux"),-1!==t.indexOf("Android")&&(n="Android"),-1!==t.indexOf("iOS")&&(n="iOS");var r="Unknown";return-1!==t.indexOf("Firefox")&&(r="Firefox"),-1!==t.indexOf("Chrome")&&(r="Chrome"),-1!==t.indexOf("Safari")&&(r="Safari"),-1!==t.indexOf("Edge")&&(r="Edge"),-1!==t.indexOf("Opera")&&(r="Opera"),{type:e,os:n,browser:r,userAgent:t}}},{key:"getLocation",value:(o=G(E().m(function t(){return E().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t({latitude:e.coords.latitude,longitude:e.coords.longitude})},function(e){t({latitude:null,longitude:null,error:e.message})},{timeout:5e3,enableHighAccuracy:!1,maximumAge:6e4}):t({latitude:null,longitude:null,error:"Geolocation not supported"})}))},t)})),function(){return o.apply(this,arguments)})},{key:"request",value:(r=G(E().m(function t(e){var n,r,o,i,a=arguments;return E().w(function(t){for(;;)switch(t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r="".concat(this.apiUrl).concat(e),o={method:n.method||"GET",headers:{"Content-Type":"application/json","X-API-Key":this.apiKey}},n.body&&(o.body=JSON.stringify(n.body)),t.n=1,fetch(r,o);case 1:return i=t.v,t.a(2,i.json())}},t,this)})),function(t){return r.apply(this,arguments)})}],e&&I(t.prototype,e),n&&I(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i,a}()})(),BEHAVEIQ=r.default})();